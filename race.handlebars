<div class="container-fluid">
  <h1>Welcome to the Race Page!</h1>

  <div class="row">

    <div class="col">
      <table id = "table_race" class="table table-striped table-hover">
        <h3>Race Data</h3>
        <thead class="thead-dark">
          <tr>
            <th scope="col">Race ID</th>
            <th scope="col">Track</th>
            <th scope="col">Date</th>
            <th scope="col">Weather</th>
            <th scope="col">Winner</th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {{#each race}}
          <tr>
            <th scope="row">{{id}}</th>
            <td>{{track_name}}</td>
            <td>{{race_date}}</td>
            <td>{{race_weather}}</td>
            <td>{{driver_name}}</td>
            <td><a href="/race/ur{{id}}" class="btn btn-primary btn-sm btn-block">Edit</a></td>
            <td><button onclick="deleteRace({{id}})" class="btn btn-secondary btn-sm btn-block">Delete</button></td>
          </tr>
          {{/each}}
        </tbody>
      </table>

      <!-- Button to trigger table add form -->
      <p>
        <a class="btn btn-primary" data-toggle="collapse" href="#race_add" role="button" aria-expanded="false" aria-controls="race_add">
          Add Race
        </a>
      </p>

      <!-- Table Add Form -->
      <div class="collapse" id="race_add">
        <div class="card card-body">
          <h3>Add a New Race</h3>
          <form id="addRace" action="/race" method="post">
            <div class="form-group">
              <label for="new_race_track">Track</label>
              <select class="custom-select" name="track">
		            {{#each track}}
                <option value="{{id}}">{{track_name}}</option>
                {{/each}}
              </select>
            </div>
            <div class="form-group">
              <label for="new_race_date">Date of the Race</label>
              <input type="date" class="form-control" name="date">
            </div>
            <div class="form-group">
              <label for="new_race_weather">Weather</label>
              <input type="text" class="form-control" name="weather" maxlength="255">
            </div>
            <div class="form-group">
              <label for="new_race_winner">Winner's ID#</label>
              <select class="custom-select" name="winner">
		{{#each driver}}
                <option value="{{id}}">{{driver_name}}</option>
                {{/each}}
              </select>
            </div>
            <button type="submit" class="btn btn-primary" name="insertRace">Submit</button>
          </form>
        </div>
      </div>
    </div>

    <div class="col">
      <table id = "table_race_driver" class="table table-striped table-hover">
        <h3>Drivers in Race</h3>
        <thead class="thead-dark">
          <tr>
            <th scope="col">Race</th>
            <th scope="col">Driver</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr>
          {{#each raceDriver}}
          <tr>
            <th>{{track_name}} - {{race_id}}</th>
            <td>{{driver_name}}</td>
            <td><button onclick="deleteRaceDriver({{race_id}}, {{driver_id}})" class="btn btn-secondary btn-sm btn-block">Delete</button></td>
          </tr>
          {{/each}}
        </tbody>
      </table>

      <!-- Button to trigger table add form -->
      <p>
        <a class="btn btn-primary" data-toggle="collapse" href="#race_driver_add" role="button" aria-expanded="false" aria-controls="race_driver_add">
          Add Driver to Race
        </a>
      </p>

      <!-- Table Add Form -->
      <div class="collapse" id="race_driver_add">
        <div class="card card-body">
          <h3>Add a Driver to a race</h3>
          <form id="addRaceDriver" action"/race" method="post">
            <div class="form-group">
              <label for="new_race_driver_track">Race</label>
              <select class="custom-select" name="raceId">
		{{#each race}}
                <option value="{{id}}">{{track_name}} - {{id}}</option>
                {{/each}}
              </select>
            </div>
            <div class="form-group">
              <label for="new_race_driver_driver">Driver</label>
              <select class="custom-select" name="driverId">
		{{#each driver}}
                <option value="{{id}}">{{driver_name}}</option>
                {{/each}}
              </select>
            </div>
            <button type="submit" class="btn btn-primary" name="insertRaceDriver">Submit</button>
          </form>
        </div>
      </div>
    </div>

    <div class="col">
      <table id = "table_track" class="table table-striped table-hover">
        <h3>Track Data</h3>
        <thead class="thead-dark">
          <tr>
            <th scope="col">Track ID</th>
            <th scope="col">Name</th>
            <th scope="col">Address</th>
            <th scope="col">City</th>
            <th scope="col">State</th>
            <th scope="col">Zip</th>
            <th scope="col">Length</th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {{#each track}}
          <tr>
            <th scope="row">{{id}}</th>
            <td>{{track_name}}</td>
            <td>{{track_address}}</td>
            <td>{{track_city}}</td>
            <td>{{track_state}}</td>
            <td>{{track_zip}}</td>
            <td>{{track_length}}</td>
            <td><a href="/race/ut{{id}}" class="btn btn-primary btn-sm btn-block">Edit</a></td>
            <td><button onclick="deleteTrack({{id}})" class="btn btn-secondary btn-sm btn-block" name="deleteTrack">Delete</button></td>
          </tr>
          {{/each}}
        </tbody>
      </table>
      <!-- Button to trigger table add form -->
      <p>
        <a class="btn btn-primary" data-toggle="collapse" href="#track_add" role="button" aria-expanded="false" aria-controls="track_add">
          Add Track
        </a>
      </p>

      <!-- Table Add Form -->
      <div class="collapse" id="track_add">
        <div class="card card-body">
          <h3>Add a New Track</h3>
          <form id="addTrack" action="/race" method="post">
            <div class="form-group">
              <label for="new_track_name">Track Name</label>
              <input type="text" class="form-control" name="name" maxlength="255" placeholder="Track Name Here">
            </div>
            <div class="form-group">
              <label for="new_track_address">Track Address</label>
              <input type="text" class="form-control" name="address" maxlength="255" placeholder="Address">
              <input type="text" class="form-control" name="city" maxlength="255" placeholder="City">
              <input type="text" class="form-control" name="state" maxlength="2" placeholder="ST">
              <input type="number" class="form-control" name="zip" maxlength="5" placeholder="Zip">
            </div>
            <div class="form-group">
              <label for="new_track_length">Track Length (in feet)</label>
              <input type="number" class="form-control" name="length">
            </div>
            <button type="submit" class="btn btn-primary" name="insertTrack">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>

<script src="../js/jquery.js"></script>
